<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Speed Test - Battle Mode</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ Typing Speed Test</h1>
            <p>Test your typing speed and accuracy - Now with Battle Mode!</p>
        </header>

        <!-- Mode Selection -->
        <div class="mode-selector">
            <button id="single-player-btn" class="mode-btn active">Single Player</button>
            <button id="battle-mode-btn" class="mode-btn">Battle Mode</button>
        </div>

        <!-- Single Player Mode -->
        <div id="single-player-mode" class="test-container">
            <div class="stats-bar">
                <div class="stat-item">
                    <span class="stat-label">Time:</span>
                    <span class="stat-value" id="timer">00:00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">WPM:</span>
                    <span class="stat-value" id="wpm-display">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Accuracy:</span>
                    <span class="stat-value" id="accuracy-display">0%</span>
                </div>
            </div>

            <div class="paragraph-container">
                <p id="paragraph-text" class="paragraph-text">
                    Click "Start Test" to begin your typing test...
                </p>
            </div>

            <div class="input-container">
                <textarea 
                    id="typing-input" 
                    class="typing-input" 
                    placeholder="Start typing here..."
                    disabled
                ></textarea>
            </div>

            <div class="controls">
                <button id="start-btn" class="btn btn-primary">Start Test</button>
                <button id="reset-btn" class="btn btn-secondary" disabled>Reset</button>
            </div>

            <div id="results" class="results hidden">
                <h2>üéØ Test Results</h2>
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Speed</h3>
                        <p class="result-value" id="final-wpm">0</p>
                        <p class="result-label">WPM</p>
                    </div>
                    <div class="result-card">
                        <h3>Accuracy</h3>
                        <p class="result-value" id="final-accuracy">0%</p>
                        <p class="result-label">Correct</p>
                    </div>
                    <div class="result-card">
                        <h3>Time</h3>
                        <p class="result-value" id="final-time">0s</p>
                        <p class="result-label">Duration</p>
                    </div>
                    <div class="result-card">
                        <h3>Errors</h3>
                        <p class="result-value" id="final-errors">0</p>
                        <p class="result-label">Mistakes</p>
                    </div>
                </div>
                <button id="new-test-btn" class="btn btn-primary">Take Another Test</button>
            </div>
        </div>

        <!-- Battle Mode -->
        <div id="battle-mode" class="battle-container hidden">
            <!-- Team Setup -->
            <div id="team-setup" class="team-setup">
                <h2>‚öîÔ∏è Battle Mode Setup</h2>
                <div class="setup-options">
                    <div class="setup-option">
                        <h3>Create Team</h3>
                        <p>Start a new battle and invite a friend</p>
                        <button id="create-team-btn" class="btn btn-primary">Create Team</button>
                    </div>
                    <div class="setup-option">
                        <h3>Join Team</h3>
                        <p>Join an existing battle with a team code</p>
                        <div class="join-input">
                            <input type="text" id="team-code-input" placeholder="Enter team code" maxlength="8">
                            <button id="join-team-btn" class="btn btn-secondary">Join Team</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Team Lobby -->
            <div id="team-lobby" class="team-lobby hidden">
                <h2>üèÜ Team Lobby</h2>
                <div class="team-info">
                    <div class="team-code-display">
                        <span class="label">Team Code:</span>
                        <span class="code" id="display-team-code">XXXX</span>
                        <button id="copy-code-btn" class="btn btn-small">Copy</button>
                    </div>
                    <div class="player-status">
                        <span class="label">Players:</span>
                        <span class="count" id="player-count">1/2</span>
                    </div>
                </div>
                
                <div class="lobby-controls">
                    <button id="start-battle-btn" class="btn btn-primary" disabled>Start Battle</button>
                    <button id="leave-team-btn" class="btn btn-secondary">Leave Team</button>
                </div>

                <div class="waiting-message" id="waiting-message">
                    Waiting for another player to join...
                </div>
            </div>

            <!-- Battle Interface -->
            <div id="battle-interface" class="battle-interface hidden">
                <div class="battle-header">
                    <h2>‚öîÔ∏è Typing Battle</h2>
                    <div class="battle-stats">
                        <div class="battle-stat">
                            <span class="label">Team:</span>
                            <span class="value" id="battle-team-code">XXXX</span>
                        </div>
                        <div class="battle-stat">
                            <span class="label">Status:</span>
                            <span class="value" id="battle-status">Waiting...</span>
                        </div>
                    </div>
                </div>

                <!-- Countdown -->
                <div id="countdown" class="countdown hidden">
                    <div class="countdown-number" id="countdown-number">5</div>
                    <p>Get ready to type!</p>
                </div>

                <!-- Battle Paragraph -->
                <div class="battle-paragraph-container">
                    <p id="battle-paragraph" class="battle-paragraph">
                        Battle paragraph will appear here...
                    </p>
                </div>

                <!-- Battle Input -->
                <div class="battle-input-container">
                    <textarea 
                        id="battle-typing-input" 
                        class="battle-typing-input" 
                        placeholder="Wait for countdown to finish..."
                        disabled
                    ></textarea>
                </div>

                <!-- Battle Results -->
                <div id="battle-results" class="battle-results hidden">
                    <h3>üèÜ Battle Results</h3>
                    <div class="battle-results-grid">
                        <div class="player-result">
                            <h4>Player 1</h4>
                            <div class="result-details">
                                <span class="wpm">WPM: <span id="player1-wpm">0</span></span>
                                <span class="accuracy">Accuracy: <span id="player1-accuracy">0%</span></span>
                            </div>
                        </div>
                        <div class="player-result">
                            <h4>Player 2</h4>
                            <div class="result-details">
                                <span class="wpm">WPM: <span id="player2-wpm">0</span></span>
                                <span class="accuracy">Accuracy: <span id="player2-accuracy">0%</span></span>
                            </div>
                        </div>
                    </div>
                    <div class="winner-announcement" id="winner-announcement">
                        <h2>üéâ Winner: <span id="winner-name">Player</span></h2>
                        <p>Score: <span id="winner-score">0</span></p>
                    </div>
                    <div class="battle-controls">
                        <button id="new-battle-btn" class="btn btn-primary">New Battle</button>
                        <button id="back-to-lobby-btn" class="btn btn-secondary">Back to Lobby</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
